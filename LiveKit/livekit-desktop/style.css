:root {
  color-scheme: light;
  --bg: #d5d9de;
  --bg-2: #cdd2d9;
  --ink: #1a1f26;
  --muted: #59626e;
  --accent: #6fa8ff;
  --accent-dark: #4a86d9;
  --panel: #e7ebf0;
  --border: #b5bcc6;
  --shadow: 0 12px 34px rgba(18, 24, 32, 0.12);
}

* {
  box-sizing: border-box;
}

html,
body {
  height: 100%;
  overflow: hidden;
}

body {
  margin: 0;
  font-family: "Space Grotesk", "Segoe UI", sans-serif;
  color: var(--ink);
  background:
    radial-gradient(900px 700px at 78% -10%, rgba(111, 168, 255, 0.12), transparent),
    radial-gradient(900px 700px at 10% 0%, rgba(210, 218, 230, 0.16), transparent),
    linear-gradient(180deg, var(--bg), var(--bg-2));
  min-height: 100vh;
}

.app {
  padding: 16px clamp(12px, 3vw, 28px) 16px;
  animation: rise 500ms ease;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.app-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  margin-bottom: 12px;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: 14px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.theme-toggle {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 600;
  padding: 6px 10px;
  border-radius: 999px;
  background: #e2e7ee;
  border: 1px solid var(--border);
}

.theme-toggle input {
  accent-color: var(--accent);
}

.brand-title {
  font-size: 28px;
  font-weight: 700;
  letter-spacing: -0.02em;
}

.brand-subtitle {
  color: var(--muted);
  font-size: 13px;
  margin-top: 2px;
}

.status-pill {
  background: #1f1d1a;
  color: #e7ebf0;
  padding: 8px 14px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 600;
  box-shadow: 0 6px 16px rgba(35, 28, 20, 0.25);
  white-space: nowrap;
}




.reconnect-banner {
  display: none;
  margin-bottom: 14px;
  padding: 10px 14px;
  border-radius: 10px;
  background: #d9e7ff;
  border: 1px solid #a9c4f3;
  color: #1f3f7a;
  font-weight: 600;
}

.error-banner {
  display: none;
  margin-bottom: 14px;
  padding: 10px 14px;
  border-radius: 10px;
  background: #ffe1e1;
  border: 1px solid #e4a0a0;
  color: #7a1f1f;
  font-weight: 600;
}

.layout {
  display: grid;
  --leftMin: 277px;
  --leftWidth: 320px;
  --chatMin: 277px;
  --chatWidth: 320px;
  grid-template-columns: minmax(var(--leftMin), var(--leftWidth)) minmax(0, 1fr) minmax(var(--chatMin), var(--chatWidth));
  gap: 14px;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

.layout.chat-collapsed {
  grid-template-columns: minmax(var(--leftMin), var(--leftWidth)) minmax(0, 1fr) 52px;
}

.panel {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 14px;
  box-shadow: var(--shadow);
  overflow: visible;
}

body.resizing,
body.resizing * {
  user-select: none;
}

body.narrow .layout {
  grid-template-columns: minmax(280px, 320px) minmax(0, 1fr);
  position: relative;
}

body.narrow .chat-panel {
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: var(--chatWidth);
  z-index: 5;
}

body.narrow .chat-panel.collapsed {
  width: 52px;
}

.section {
  padding: 10px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: #e8edf4;
  margin-bottom: 10px;
}

.section:last-child {
  margin-bottom: 0;
}

.section.hidden {
  display: none;
}

.panel-title {
  font-size: 14px;
  text-transform: uppercase;
  letter-spacing: 0.16em;
  color: var(--muted);
  margin-bottom: 8px;
}

.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 8px;
}

.connection-inline {
  display: flex;
  align-items: center;
  gap: 10px;
}

.connection-inline .status-pill {
  flex: 1 1 auto;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
}

#roomAccessSection.connected .section-header {
  justify-content: flex-start;
}

#roomAccessSection.connected #connectionTitle {
  display: none;
}

#roomAccessSection.connected .connection-inline {
  width: 100%;
  justify-content: space-between;
}

#roomAccessSection.connected .service-settings {
  display: none;
}

.exit-btn {
  width: 34px;
  height: 34px;
  background: #e3e8ef;
}

.door-icon {
  width: 16px;
  height: 16px;
  display: inline-block;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23202020' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M14 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4'/><path d='M10 17l5-5-5-5'/><path d='M15 12H3'/></svg>");
}
.collapse-toggle {
  width: 28px;
  height: 28px;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.chevron {
  display: inline-block;
  font-size: 12px;
  line-height: 1;
  color: var(--muted);
  transition: transform 150ms ease;
}

.chevron::before {
  content: "v";
}

.section.collapsed .chevron {
  transform: rotate(-90deg);
}

.section.collapsed .room-access-fields,
.section.collapsed .grid-2,
.section.collapsed .button-row,
.section.collapsed .preview-list,
.section.collapsed .field,
.section.collapsed .settings-hint {
  display: none;
}

#roomAccessSection.collapsed .button-row {
  display: flex;
}

.section.collapsed .section-header {
  margin-bottom: 0;
}

.section-header .panel-title {
  margin-bottom: 0;
}

.room-access-fields {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

#roomAccessSection.collapsed .room-access-fields {
  display: none;
}

.service-settings {
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px dashed var(--border);
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.service-settings-body {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.service-settings.collapsed .service-settings-body {
  display: none;
}

.service-settings.collapsed .chevron {
  transform: rotate(-90deg);
}

.service-settings .field {
  margin-bottom: 0;
}

.panel-title.small {
  font-size: 11px;
  letter-spacing: 0.18em;
  margin-bottom: 6px;
}

.settings-hint {
  font-size: 11px;
  color: var(--muted);
}

#roomPreviewSection.collapsed .preview-list,
#roomPreviewSection.collapsed .preview-status,
#roomPreviewSection.collapsed .preview-actions {
  display: none;
}
.stage-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.stage-header .panel-title {
  margin-bottom: 0;
}

.controls .field {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-bottom: 8px;
}

.controls {
  position: relative;
  z-index: 3;
  overflow-y: auto;
  overflow-x: hidden;
}

.stage {
  position: relative;
  z-index: 1;
  overflow: hidden;
}

.controls label {
  font-size: 12px;
  color: var(--muted);
  font-weight: 600;
}

.controls input,
.controls select {
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 10px 12px;
  font-size: 14px;
  background: #fffdf9;
  color: var(--ink);
  outline: none;
  transition: border 150ms ease, box-shadow 150ms ease;
  width: 100%;
}

.controls input:focus,
.controls select:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(240, 165, 58, 0.2);
}

.grid-2 {
  display: grid;
  gap: 8px;
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

.inline {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
}

.inline select {
  flex: 1 1 180px;
  min-width: 0;
}

.inline .btn.small {
  flex: 0 0 auto;
}

.preview-status {
  font-size: 12px;
  color: var(--muted);
  font-weight: 600;
}

.status-pill.ping-good {
  background: #e3f6ee;
  color: #1f6e4c;
}

.status-pill.ping-warn {
  background: #fff1d7;
  color: #8b5a00;
}

.status-pill.ping-bad {
  background: #fde3e3;
  color: #8d1f1f;
}

.preview-list {
  margin-top: 8px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  max-height: 200px;
  overflow-y: auto;
  padding-right: 4px;
}

.preview-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding: 2px 0;
  font-size: 12px;
  color: var(--ink);
}


#fpsCustomInput {
  display: none;
  margin-top: 8px;
}

.button-row {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin: 6px 0;
}

.button-row.compact {
  margin-top: 6px;
}

.button-row.compact {
  margin-top: 6px;
}

.btn {
  border: 1px solid transparent;
  border-radius: 999px;
  padding: 8px 14px;
  font-weight: 600;
  cursor: pointer;
  transition: transform 120ms ease, box-shadow 120ms ease, background 120ms ease;
}

.btn.icon-btn {
  width: 38px;
  height: 38px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  border-radius: 999px;
  background: #e3e8ef;
  border-color: var(--border);
}

.btn.icon-btn.is-muted {
  background: #ffe1e1;
  border-color: #e4a0a0;
}

.btn.icon-btn .icon {
  width: 16px;
  height: 16px;
  display: inline-block;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

.btn.icon-btn.watch-btn {
  width: 30px;
  height: 30px;
}

.btn.icon-btn.watch-btn .icon {
  width: 14px;
  height: 14px;
}

.btn.icon-btn.mute-btn {
  width: 38px;
  height: 38px;
}

.btn.icon-btn.mute-btn .icon {
  width: 20px;
  height: 20px;
  background-size: 100% 100%;
}

.btn.icon-btn.watch-btn.is-active {
  background: #d9f3e5;
  border-color: #9bd4b7;
}

.icon.eye-on {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23202020' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7-10-7-10-7z'/><circle cx='12' cy='12' r='3'/></svg>");
}

.icon.eye-off {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23202020' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7-10-7-10-7z'/><circle cx='12' cy='12' r='3'/><line x1='2' y1='2' x2='22' y2='22'/></svg>");
}
.icon.mic-on {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23202020' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='9' y='2' width='6' height='12' rx='3'/><path d='M5 10v2a7 7 0 0 0 14 0v-2'/><line x1='12' y1='19' x2='12' y2='22'/><line x1='8' y1='22' x2='16' y2='22'/></svg>");
}

.icon.mic-off {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23202020' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M6 1l12 12'/><path d='M12 14a3 3 0 0 0 3-3v-1'/><path d='M9 9V5a3 3 0 0 1 5.12-2.12'/><path d='M19 11a7 7 0 0 1-7 7'/><path d='M5 11a7 7 0 0 0 5 6.71'/><path d='M12 19v4'/><path d='M8 23h8'/></svg>");
}

.icon.speaker-on {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23202020' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polygon points='11 5 6 9 2 9 2 15 6 15 11 19 11 5'/><path d='M15 9a4 4 0 0 1 0 6'/><path d='M19 7a7 7 0 0 1 0 10'/></svg>");
}

.icon.speaker-off {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23202020' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polygon points='11 5 6 9 2 9 2 15 6 15 11 19 11 5'/><line x1='1' y1='1' x2='23' y2='23'/></svg>");
}

.icon.headphones-on {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23202020' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M4 13v-1a8 8 0 0 1 16 0v1'/><rect x='3' y='13' width='4' height='7' rx='2'/><rect x='17' y='13' width='4' height='7' rx='2'/></svg>");
}

.icon.headphones-off {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23202020' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M4 13v-1a8 8 0 0 1 16 0v1'/><rect x='3' y='13' width='4' height='7' rx='2'/><rect x='17' y='13' width='4' height='7' rx='2'/><line x1='1' y1='1' x2='23' y2='23'/></svg>");
}

.btn.primary {
  background: var(--ink);
  color: #e7ebf0;
  box-shadow: 0 12px 20px rgba(35, 28, 20, 0.25);
}

.btn.primary:hover {
  transform: translateY(-1px);
}

.btn.ghost {
  background: #e3e8ef;
  border-color: var(--border);
  color: var(--ink);
}

.btn.ghost:hover {
  background: #d9e0e9;
}

.btn.small {
  padding: 6px 10px;
  font-size: 11px;
}

.stage {
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-height: 0;
  overflow: hidden;
}

.chat-panel {
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.streams {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 12px;
  overflow: hidden;
  min-height: 0;
  flex: 1 1 0;
  align-content: start;
  padding: 4px;
}

.minimized-panel {
  margin-top: 8px;
}

.minimized-streams {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.minimized-streams .stream-tile {
  min-width: 220px;
}

.minimized-panel:empty,
.minimized-streams:empty {
  display: none;
}

.stream-tile {
  display: flex;
  flex-direction: column;
  gap: 6px;
  align-items: stretch;
  position: relative;
  z-index: 2;
  background: #e8edf4;
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 8px 10px 6px;
  box-shadow: 0 10px 24px rgba(38, 30, 22, 0.08);
  min-height: 0;
  overflow: hidden;
}

.stream-header {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

body.theater-mode .stream-header {
  margin-bottom: 4px;
}

.stream-title {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
}

.stream-media {
  position: relative;
  width: 100%;
  min-height: 0;
  aspect-ratio: 16 / 9;
  display: flex;
}

.stream-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--ink);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.stream-info {
  font-size: 12px;
  color: var(--muted);
  white-space: nowrap;
}

.volume-slider {
  width: 100%;
  min-width: 140px;
  max-width: 180px;
  flex: 1 1 140px;
  position: relative;
  z-index: 3;
  appearance: none;
  -webkit-appearance: none;
  background: transparent;
  height: 18px;
  margin: 0;
  --thumb-size: 14px;
  --range-track: #cbd4df;
  --range-thumb: #8f9bad;
}

.volume-wrap {
  position: relative;
  flex: 1 1 140px;
  min-width: 140px;
  max-width: 180px;
  height: 18px;
  display: flex;
  align-items: center;
  overflow: visible;
  --thumb-size: 14px;
  --meter-offset: 12px;
}

.volume-meter {
  position: absolute;
  left: var(--meter-offset);
  width: calc(100% - (var(--meter-offset) + var(--meter-offset)));
  height: 4px;
  background: #3bb273;
  border-radius: 999px;
  transform-origin: left center;
  transform: scaleX(0);
  pointer-events: none;
  z-index: 4;
  opacity: 0.8;
}

.volume-slider::-webkit-slider-runnable-track {
  height: 4px;
  background: var(--range-track);
  border-radius: 999px;
}

.volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: var(--range-thumb);
  margin-top: -5px;
  border: none;
  position: relative;
  z-index: 2;
}

.volume-slider::-moz-range-track {
  height: 4px;
  background: var(--range-track);
  border-radius: 999px;
}

.volume-slider::-moz-range-thumb {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: var(--range-thumb);
  border: none;
}

.stream-actions {
  display: flex;
  justify-content: flex-end;
  gap: 6px;
}

.stream-actions .btn.small {
  padding: 6px 10px;
}

.streams video {
  width: 100%;
  height: 100%;
  border-radius: 10px;
  background: #000;
  aspect-ratio: auto;
  object-fit: contain;
}

body.theater-mode .streams video {
  height: auto;
}

.stream-tile.minimized {
  padding: 10px 12px;
  border: 1px dashed var(--border);
  border-radius: 14px;
  background: #e8edf4;
}

.stream-tile.minimized video {
  display: none;
}

body.theme-dark .stream-tile.minimized {
  background: #22282f;
  border-color: #2b323a;
}

body.theme-dark .stream-tile {
  background: #1e2329;
  border-color: #2b323a;
}

body.theater-mode .layout {
  grid-template-columns: 1fr;
}

body.theater-mode .controls {
  display: none;
}

body.theater-mode .chat-panel {
  display: none;
}

body.theater-mode .resize-handle {
  display: none;
}

body.theater-mode .streams {
  grid-template-columns: repeat(auto-fit, minmax(360px, 1fr));
  grid-auto-rows: auto;
  align-content: start;
  padding-bottom: 12px;
  padding-top: 6px;
}

body.theater-mode .stream-tile {
  padding: 6px 8px 4px;
  display: grid;
  grid-template-rows: auto auto;
  align-items: stretch;
}

body.theater-mode .stream-tile > video {
  min-height: 0;
}

body.theater-mode .minimized-panel {
  display: none;
}

.stream-status {
  display: none;
  padding: 10px 12px;
  border-radius: 10px;
  background: #dfe5ee;
  border: 1px solid var(--border);
  font-size: 12px;
  color: var(--muted);
}

.participants {
  margin-top: 8px;
}

.participants-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.participants-list > div,
.activity-log > div,
.chat-log > div {
  background: #e8edf4;
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 8px 10px;
}

.participants-list > div.is-muted {
  background: #f6d6d6;
  border-color: #e9b3b3;
}

.activity-log {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 200px;
  overflow-y: auto;
}

.activity-log .activity-item {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  font-size: 12px;
  color: var(--muted);
}

.activity-time {
  font-variant-numeric: tabular-nums;
  color: #7a8796;
}

.chat-dock {
  display: flex;
  flex-direction: column;
  gap: 8px;
  height: 100%;
}

.chat-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

/* Manual gain controls (disabled for now)
.manual-gain-row {
  display: none;
  align-items: center;
  gap: 12px;
  padding-top: 6px;
}

.manual-gain-row label {
  font-size: 12px;
  color: var(--muted);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.manual-gain-row input[type="range"] {
  flex: 1 1 auto;
}
*/

.chat-status {
  font-size: 12px;
  padding: 4px 10px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.08);
  color: inherit;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  font-weight: 600;
}

.chat-status.online {
  background: rgba(92, 214, 131, 0.2);
  color: #6fe3a4;
}

.chat-status.offline {
  background: rgba(255, 255, 255, 0.08);
  color: inherit;
}

.chat-dock.collapsed .chat-log,
.chat-dock.collapsed .chat-input {
  display: none;
}

.chat-dock.collapsed {
  height: auto;
}

.chat-panel.collapsed {
  padding: 6px;
}

.chat-panel {
  position: relative;
}

.chat-panel .resize-handle {
  position: absolute;
  left: -6px;
  top: 0;
  bottom: 0;
  width: 8px;
  cursor: col-resize;
  border-radius: 999px;
  background: rgba(90, 70, 55, 0.25);
  transition: background 0.15s ease;
}

.chat-panel .resize-handle:hover {
  background: rgba(90, 70, 55, 0.45);
}

.controls {
  position: relative;
}

.controls .resize-handle.left-handle {
  position: absolute;
  right: -6px;
  top: 0;
  bottom: 0;
  width: 8px;
  cursor: col-resize;
  border-radius: 999px;
  background: rgba(90, 70, 55, 0.25);
  transition: background 0.15s ease;
}

.controls .resize-handle.left-handle:hover {
  background: rgba(90, 70, 55, 0.45);
}

.chat-panel.collapsed .resize-handle,
body.narrow .chat-panel .resize-handle,
body.theater-mode .chat-panel .resize-handle {
  display: none;
}

body.narrow .controls .resize-handle.left-handle,
body.theater-mode .controls .resize-handle.left-handle {
  display: none;
}

.chat-panel.collapsed .chat-dock {
  align-items: center;
  gap: 0;
}

.chat-panel.collapsed .chat-header {
  justify-content: center;
}

.chat-panel.collapsed .panel-title,
.chat-panel.collapsed .chat-status,
.chat-panel.collapsed .chat-log,
.chat-panel.collapsed .chat-input {
  display: none;
}

.chat-panel.collapsed .collapse-toggle .chevron {
  transform: rotate(90deg);
}

.chat-collapsed-label {
  display: none;
  margin-top: 6px;
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.2em;
  writing-mode: vertical-rl;
  text-orientation: upright;
}

.chat-panel.collapsed .chat-collapsed-label {
  display: block;
}

.stream-watch-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 10px;
  background: rgba(15, 12, 9, 0.35);
  border-radius: 10px;
  backdrop-filter: blur(2px);
  opacity: 0;
  pointer-events: none;
  transition: opacity 160ms ease;
  z-index: 2;
}

.stream-tile.minimized .stream-watch-overlay {
  opacity: 1;
  pointer-events: auto;
}

.watch-overlay-btn {
  padding: 8px 16px;
  font-size: 12px;
}

.watch-overlay-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: center;
}

.icon.expand {
  width: 18px;
  height: 18px;
  display: inline-block;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23202020' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M15 3h6v6'/><path d='M9 21H3v-6'/><path d='M21 3l-7 7'/><path d='M3 21l7-7'/></svg>");
}

.icon.compress {
  width: 18px;
  height: 18px;
  display: inline-block;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23202020' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M9 3v6H3'/><path d='M15 21v-6h6'/><path d='M3 3l6 6'/><path d='M21 21l-6-6'/></svg>");
}

body.theme-dark .icon.expand {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23f3ede6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M15 3h6v6'/><path d='M9 21H3v-6'/><path d='M21 3l-7 7'/><path d='M3 21l7-7'/></svg>");
}

body.theme-dark .icon.compress {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23f3ede6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M9 3v6H3'/><path d='M15 21v-6h6'/><path d='M3 3l6 6'/><path d='M21 21l-6-6'/></svg>");
}

body.theme-dark .stream-watch-overlay {
  background: rgba(10, 9, 8, 0.45);
}

.stream-tile.placeholder:hover .stream-watch-overlay,
.stream-tile.watching:hover .stream-watch-overlay {
  opacity: 1;
  pointer-events: auto;
}

.stream-tile:hover .stream-watch-overlay {
  opacity: 1;
  pointer-events: auto;
}

.stream-tile[data-local="true"]:hover .stream-watch-overlay {
  opacity: 1;
  pointer-events: auto;
}

.stream-tile.placeholder {
  min-height: 220px;
  border: 1px dashed var(--border);
  border-radius: 16px;
  padding: 10px;
  background: #e8edf4;
  box-shadow: 0 10px 24px rgba(38, 30, 22, 0.08);
}

body.theater-mode .stream-tile.placeholder {
  min-height: 0;
}

.stream-tile.placeholder .stream-name {
  font-size: 14px;
  font-weight: 700;
}

.stream-tile.placeholder .stream-info {
  color: var(--muted);
  font-weight: 600;
}

.stream-tile.placeholder video {
  display: none;
}

.stream-tile.placeholder .stream-watch-overlay {
  opacity: 1;
  pointer-events: auto;
  background: rgba(15, 12, 9, 0.2);
}

body.theme-dark .stream-tile.placeholder {
  background: #22282f;
  border-color: #2b323a;
}

body.theme-dark .stream-tile.placeholder .stream-watch-overlay {
  background: rgba(10, 9, 8, 0.3);
}

.chat-log {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden;
  padding-right: 4px;
}

.chat-item {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.chat-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  color: var(--muted);
}

.chat-activity-label {
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.chat-name {
  font-weight: 600;
}

.chat-time {
  font-variant-numeric: tabular-nums;
  color: #7a8796;
}

.chat-text {
  font-size: 13px;
  color: var(--ink);
  overflow-wrap: anywhere;
  word-break: break-word;
}

.chat-item.activity .chat-text {
  color: var(--muted);
  font-style: italic;
}

.chat-input {
  display: flex;
  gap: 8px;
  align-items: center;
}

.chat-input input {
  flex: 1 1 auto;
}


.gear-icon {
  width: 16px;
  height: 16px;
  display: inline-block;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23202020' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='3'/><path d='M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9c0 .67.39 1.27 1 1.51H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z'/></svg>");
}

.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(15, 12, 10, 0.5);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 20;
}

.modal-overlay.open {
  display: flex;
}

.modal {
  width: min(420px, 90vw);
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 16px;
  box-shadow: var(--shadow);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.modal-title {
  font-weight: 700;
  font-size: 16px;
}

.modal-body {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.audio-setting-row {
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-size: 12px;
  color: var(--muted);
}

.audio-setting-row .slider-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.audio-setting-row input[type="range"] {
  flex: 1;
}

.audio-setting-row .slider-value {
  min-width: 32px;
  text-align: right;
  font-size: 12px;
  color: var(--muted);
}

.audio-setting-hint {
  font-size: 11px;
  color: var(--muted);
}

.hotkey-display {
  min-width: 90px;
  padding: 4px 8px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: #e8edf4;
  font-size: 11px;
  letter-spacing: 0.02em;
  text-transform: uppercase;
  color: var(--muted);
}

body.theme-dark .hotkey-display {
  background: #2b323a;
}

.emoji-wrap {
  position: relative;
}

.emoji-picker {
  position: absolute;
  bottom: 42px;
  left: 0;
  display: none;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 6px;
  padding: 8px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: #e8edf4;
  box-shadow: var(--shadow);
  z-index: 5;
}

.emoji-picker.open {
  display: grid;
}

.emoji-item {
  border: 1px solid var(--border);
  background: #fffdf9;
  border-radius: 8px;
  padding: 6px 8px;
  cursor: pointer;
  font-size: 16px;
}

.emoji-item:hover {
  background: #d9e0e9;
}

.participant-row {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 6px;
}

.participant-meta {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  min-width: 0;
}

.participant-name-stack {
  display: flex;
  flex-direction: column;
  min-width: 0;
  gap: 2px;
}

.participant-name-row {
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 0;
}

.participant-name {
  font-weight: 600;
  font-size: 13px;
  color: var(--ink);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: 1.2;
}

.participant-muted-icon {
  display: none;
  width: 14px;
  height: 14px;
  flex: 0 0 auto;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23b24747' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M6 1l12 12'/><path d='M12 14a3 3 0 0 0 3-3v-1'/><path d='M9 9V5a3 3 0 0 1 5.12-2.12'/><path d='M19 11a7 7 0 0 1-7 7'/><path d='M5 11a7 7 0 0 0 5 6.71'/><path d='M12 19v4'/><path d='M8 23h8'/></svg>");
}

.participant-row.is-muted .participant-muted-icon {
  display: inline-block;
}

.participant-stream-info {
  font-size: 11px;
  color: var(--muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.participant-controls {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 8px;
  margin-top: 0;
  justify-content: flex-start;
}

.participant-control-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.participant-control-row.stream-control-row {
  display: none;
}

.participant-control-row.stream-control-row.active {
  display: flex;
}

.stream-mute-btn .icon {
  width: 20px;
  height: 20px;
}

.icon.tv-on {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23202020' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='3' y='5' width='18' height='12' rx='2'/><path d='M8 21h8'/><path d='M12 17v4'/></svg>");
}

.icon.tv-off {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23202020' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='3' y='5' width='18' height='12' rx='2'/><path d='M8 21h8'/><path d='M12 17v4'/><line x1='1' y1='1' x2='23' y2='23'/></svg>");
}

.quality-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #9d8c7c;
  box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.08);
  flex: 0 0 auto;
  margin-top: 2px;
}

.quality-excellent { background: #3bb273; box-shadow: 0 0 0 3px rgba(59, 178, 115, 0.2); }
.quality-good { background: #f0a53a; box-shadow: 0 0 0 3px rgba(240, 165, 58, 0.2); }
.quality-poor { background: #e25c5c; box-shadow: 0 0 0 3px rgba(226, 92, 92, 0.2); }

@keyframes rise {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@media (max-width: 420px) {
  .layout {
    grid-template-columns: 1fr;
  }

  .resize-handle {
    display: none;
  }
}

body.theme-dark {
  color-scheme: dark;
  --bg: #141619;
  --bg-2: #1b1f24;
  --ink: #eef1f5;
  --muted: #9aa4b2;
  --accent: #6fb0ff;
  --accent-dark: #4a86d9;
  --panel: #1e2329;
  --border: #2b323a;
  --shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  background:
    radial-gradient(900px 700px at 80% -10%, rgba(111, 176, 255, 0.12), transparent),
    radial-gradient(900px 700px at 10% 0%, rgba(88, 108, 136, 0.22), transparent),
    linear-gradient(180deg, var(--bg), var(--bg-2));
}

body.theme-dark .status-pill {
  background: #eef1f5;
  color: #1a1d22;
}


body.theme-dark .btn.primary {
  background: #eef1f5;
  color: #1a1d22;
}

body.theme-dark .btn.ghost {
  background: #2b323a;
  color: var(--ink);
}

body.theme-dark .btn.ghost:hover {
  background: #343c46;
}

body.theme-dark .btn.icon-btn {
  background: #2b323a;
  border-color: #2b323a;
}

body.theme-dark .btn.icon-btn.is-muted {
  background: #3a1f1f;
  border-color: #6b2d2d;
}

body.theme-dark .btn.icon-btn.watch-btn.is-active {
  background: #1f3a2c;
  border-color: #2f5a42;
}

body.theme-dark .volume-slider {
  --range-track: #2b323a;
  --range-thumb: #c7d0da;
}

body.theme-dark .volume-meter {
  background: #4fe08f;
}

body.theme-dark .exit-btn {
  background: #2b323a;
  border-color: #2b323a;
}

body.theme-dark .door-icon {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23f3ede6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M14 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4'/><path d='M10 17l5-5-5-5'/><path d='M15 12H3'/></svg>");
}


body.theme-dark .gear-icon {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23f3ede6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='3'/><path d='M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9c0 .67.39 1.27 1 1.51H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z'/></svg>");
}

body.theme-dark .icon.mic-on {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23f3ede6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='9' y='2' width='6' height='12' rx='3'/><path d='M5 10v2a7 7 0 0 0 14 0v-2'/><line x1='12' y1='19' x2='12' y2='22'/><line x1='8' y1='22' x2='16' y2='22'/></svg>");
}

body.theme-dark .icon.mic-off {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23f3ede6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M6 1l12 12'/><path d='M12 14a3 3 0 0 0 3-3v-1'/><path d='M9 9V5a3 3 0 0 1 5.12-2.12'/><path d='M19 11a7 7 0 0 1-7 7'/><path d='M5 11a7 7 0 0 0 5 6.71'/><path d='M12 19v4'/><path d='M8 23h8'/></svg>");
}

body.theme-dark .icon.speaker-on {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23f3ede6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polygon points='11 5 6 9 2 9 2 15 6 15 11 19 11 5'/><path d='M15 9a4 4 0 0 1 0 6'/><path d='M19 7a7 7 0 0 1 0 10'/></svg>");
}

body.theme-dark .icon.speaker-off {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23f3ede6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polygon points='11 5 6 9 2 9 2 15 6 15 11 19 11 5'/><line x1='1' y1='1' x2='23' y2='23'/></svg>");
}

body.theme-dark .icon.headphones-on {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23f3ede6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M4 13v-1a8 8 0 0 1 16 0v1'/><rect x='3' y='13' width='4' height='7' rx='2'/><rect x='17' y='13' width='4' height='7' rx='2'/></svg>");
}

body.theme-dark .icon.headphones-off {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23f3ede6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M4 13v-1a8 8 0 0 1 16 0v1'/><rect x='3' y='13' width='4' height='7' rx='2'/><rect x='17' y='13' width='4' height='7' rx='2'/><line x1='1' y1='1' x2='23' y2='23'/></svg>");
}

body.theme-dark .icon.tv-on {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23f3ede6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='3' y='5' width='18' height='12' rx='2'/><path d='M8 21h8'/><path d='M12 17v4'/></svg>");
}

body.theme-dark .icon.tv-off {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23f3ede6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='3' y='5' width='18' height='12' rx='2'/><path d='M8 21h8'/><path d='M12 17v4'/><line x1='1' y1='1' x2='23' y2='23'/></svg>");
}

body.theme-dark .icon.eye-on {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23f3ede6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7-10-7-10-7z'/><circle cx='12' cy='12' r='3'/></svg>");
}

body.theme-dark .icon.eye-off {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23f3ede6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7-10-7-10-7z'/><circle cx='12' cy='12' r='3'/><line x1='2' y1='2' x2='22' y2='22'/></svg>");
}

body.theme-dark .quality-dot {
  background: #667181;
  box-shadow: 0 0 0 3px rgba(102, 113, 129, 0.25);
}

body.theme-dark .stream-status {
  background: #252b32;
  border-color: #2b323a;
}

body.theme-dark .participants-list > div {
  background: #22282f;
  border-color: #2b323a;
}

body.theme-dark .participants-list > div.is-muted {
  background: #3a1f1f;
  border-color: #5a2a2a;
}

body.theme-dark .activity-log > div {
  background: #22282f;
  border-color: #2b323a;
}

body.theme-dark .chat-log > div {
  background: #22282f;
  border-color: #2b323a;
}

body.theme-dark .chat-dock {
  border-color: #2b323a;
}

body.theme-dark .emoji-picker {
  background: #22282f;
  border-color: #2b323a;
}

body.theme-dark .emoji-item {
  background: #2b323a;
  border-color: #2b323a;
}

body.theme-dark .chat-text {
  color: var(--ink);
}

body.theme-dark .theme-toggle {
  background: #2b323a;
  color: var(--ink);
}

body.theme-dark .controls input,
body.theme-dark .controls select {
  background: #2b323a;
  color: var(--ink);
  border-color: #2b323a;
}

body.theme-dark .controls input::placeholder {
  color: #8f9aaa;
}

body.theme-dark .error-banner {
  background: #3a1f1f;
  border-color: #6b2d2d;
  color: #f1b5b5;
}

body.theme-dark .section {
  background: #22282f;
  border-color: #2b323a;
}

body.theme-dark .preview-item {
  color: var(--ink);
}

body.theme-dark .status-pill.ping-good {
  background: #1d3a2c;
  color: #bfe9d6;
}

body.theme-dark .status-pill.ping-warn {
  background: #3a3030;
  color: #e6d2b0;
}

body.theme-dark .status-pill.ping-bad {
  background: #3a1f1f;
  color: #f1b5b5;
}

